@page "/dashboard"
@using Microsoft.AspNetCore.Authorization
@inject NavigationManager Navigation
@inject IHttpContextAccessor HttpContextAccessor
@attribute [Authorize]


<h2>Welcome to your Dashboard! 🎉</h2>

<p>This is your personal space. From here you’ll manage your study subjects, tasks, and progress.</p>

@if (!string.IsNullOrEmpty(UserName))
{
    <p>Hello, <strong>@UserName</strong> 👋</p>
}
else
{
    <p><em>Loading user info...</em></p>
}


@inject AuthenticationStateProvider AuthStateProvider


@code {
    private string? UserName;

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (user.Identity?.IsAuthenticated == true)
        {
            UserName = user.Identity.Name;
        }
    }
}
